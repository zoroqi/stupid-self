# 42. 接雨水
```
给定 n 个非负整数表示每个宽度为 1 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。




                    +--+
                    |  |
                    |  |
        +--+        |  +--+  +--+
        |  |        |  |  |  |  |
        |  |        |  |  |  |  |
  +--+  |  +--+  +--+  |  +--+  +--+
  |  |  |  |  |  |  |  |  |  |  |  |
  |  |  |  |  |  |  |  |  |  |  |  |
----------------------------------------

> 画图工具 http://asciiflow.com/

上面是由数组 [0,1,0,2,1,0,1,3,2,1,2,1] 表示的高度图，在这种情况下，可以接 6 个单位的雨水（蓝色部分表示雨水）。 感谢 Marcos 贡献此图。

示例:

输入: [0,1,0,2,1,0,1,3,2,1,2,1]
输出: 6

来源：力扣（LeetCode）
链接：https://leetcode-cn.com/problems/trapping-rain-water
著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。
```

## 愚笨的思考

基于图像比较好理解, 坑的出现是中间底两边高的形状. 从观察从左向右要只有递增序列中间存在凹陷既可以存储水. 

1. 遍历整个数组
2. 采用栈进行存储
3. 栈中存储递增的下标
4. 大于前数据. 出栈, 计算下标之间的储水量, 入栈新的下标
5. 从左右个遍历一次

遇到的问题

左右遍历需要注意`[4,0,4]`这种情况, 右\-\>左的遍历需要不处理`=`情况

## 发现可以进行一定优化

1. 找到第一个最大值进行左右两个遍历更快一点
2. 可以不适用栈, 只需要保留前一个元素就好. 当初不知道为啥要用栈
3. 没有`[4,0,4]`这种问题


## 一些思考

栈很适合做类似最大和最小值的情况, 它可以缓存3个状态, 只存储递增序列索引的栈`[0,6]`包含了3个信息

1. `array[0]<array[6]`
2. `array[6]>array[i], i∈[1,5]`
3. `array[0]>array[i], i∈[1,5]`

算法优化中的时间和空间的一个方向就是用尽量少的结构存储尽量多的状态. 上方的例子就是用三个`int`存储了11个状态.


