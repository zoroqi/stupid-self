---
aliases:
- 829. 连续整数求和
- 829. consecutive numbers sum
tc:
- leetcode
- algorithm
leetcode:
  num: 829
  url: https://leetcode.cn/problems/consecutive-numbers-sum/
  tags:
  - 数学
date: "2022-12-05"
id: 20221205100004_3f90ad3c1e334f17
---

# 829. 连续整数求和

给定一个正整数 n，返回连续正整数满足所有数字之和为 n 的组数 。

```
示例 1:

输入: n = 5
输出: 2
解释: 5 = 2 + 3，共有两组连续整数([5],[2,3])求和后为 5。

示例 2:

输入: n = 9
输出: 3
解释: 9 = 4 + 5 = 2 + 3 + 4

示例 3:

输入: n = 15
输出: 4
解释: 15 = 8 + 7 = 4 + 5 + 6 = 1 + 2 + 3 + 4 + 5
```

提示:

* `1 <= n <= 10^9`

## 愚笨的思考

限制条件
1. **连续**
2. **正整数**

连续正整数和是可以直接有求和公式得到的. 就得到了相应的公式, 其中 x 代表起始数, l 代表连续数的量.

$$
\begin{align*}
\frac{l(x + (x+l-1))}{2}=n\\
\implies (2x-1)l +l^2 = 2n\\
\implies x = \frac{2n-l^2+l}{2l}
\end{align*}
$$

其中 x 是正整数, l 在 $[1..\sqrt{2n}]$ 范围内, 只要 x 是正整数就对应一个合法的连续数组. l 的范围是根据因为 $l^2 <= 2n$ 得到的.

没想到一次成功, 很开心, 这个题给了我很好的信心, 之前几个困难根本不会.

我很好奇为啥这会是一个困难题, 我感觉这题很简单.
是因为会用到数学就定义成困难吗? 感觉初中数学(高中)应该定义成简单或中等比较合适.
而且这个题有 170 个测试用例.

* 假设 l 确定, 方程就变成了一元一次方程, 只有一个解.
* 假设 x 确定, 方程就变成了一元二次方程, 有两个解. 两个解是 $\frac{(1-2x)\pm\sqrt{4x^2-4x+1-8n}}{2}$
    * $x >= 0$ 要么没有解, 要么解是 0 , 要么只有一个正整数解.
    * 不会出现两个符合要求解情况

写 haskell 的时候遇到几个问题,
1. 类型的转换, 我用 Int 作为输入, 就必须用 fromIntegral 转换后才能使用
2. let 的作用域只在 in 范围内, where 不再里面. 我一直以为 where 算作 in 里的一部分呢, 看来 where 和 let 是平级的.
