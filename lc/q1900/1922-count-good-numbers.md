---
aliases:
- 1922. 统计好数字的数目
- 1922. count good numbers
tc:
- leetcode
- algorithm
leetcode:
  num: 1922
  url: https://leetcode.cn/problems/count-good-numbers/
date: "2023-05-24"
id: 20230524042642_f71ebff0c42f49d5
---

# 1922. 统计好数字的数目

我们称一个数字字符串是 好数字 当它满足（下标从 0 开始）偶数 下标处的数字为 偶数 且 奇数 下标处的数字为 质数 （2，3，5 或 7）。

比方说，"2582" 是好数字，因为偶数下标处的数字（2 和 8）是偶数且奇数下标处的数字（5 和 2）为质数。但 "3245" 不是 好数字，因为 3 在偶数下标处但不是偶数。
给你一个整数 n ，请你返回长度为 n 且为好数字的数字字符串 总数 。由于答案可能会很大，请你将它对 `10^9 + 7` 取余后返回 。

一个 数字字符串 是每一位都由 0 到 9 组成的字符串，且可能包含前导 0 。

```
示例 1：

输入：n = 1
输出：5
解释：长度为 1 的好数字包括 "0"，"2"，"4"，"6"，"8" 。
示例 2：

输入：n = 4
输出：400
示例 3：

输入：n = 50
输出：564908303
```

**提示：**

提示：

- `1 <= n <= 10^15`

## 愚笨的思考

根据提示可以知道只是一个排序组合的问题, 和 "[[233-number-of-digit-one|233. 数字 1 的个数]]" 是一个相似的题.

### PlanA

根据例子可以知道, 从最高位开始计算的.
| 0 | 1 | 2 | 3 |
| -- | -- | -- | -- |
| 2 | 5 | 8 | 2 |
| 3 | 2 | 4 | 5 |

我理解这个字符串必须包含 n 个数字, 不足部分用 0 不足.

总共的可能数字有 `10^n` 个, 找到合法的部分.

- 质数只有 2,3,5,7
- 偶数只有 0,2,4,6,8

所以
- 一位数: 5 种情况
- 二位数: 十位 5 种, 个位 4 种, 共 20 种情况
- 三位数: 百位 5 种, 十位 4 种, 个位 5 种, 共 100 种情况
- 四位数: 类推 多一个 4 种的情况, 共 400 中情况

处理逻辑就是
1. 偶数长度, 返回 `20^(n/2)`
2. 奇数长度, 返回 `20^(n/2)*5`

看答案是使用一个快速幂的东西, 但是完全不会, 现在的问题是简单的计算 pow 都不对, 这个有点麻烦...
计算不对可能是中间越界导致的.

```go
res := 1
for ; n > 0; n >>= 1 {
  if n&1 > 0 {
    res = res * x
  }
  x = x * x
}
return res
```

需要防止溢出需要用到一个余数相关的公式 $(a*b) mod c = ((a mod c) * (b mod c)) mod c$.
在这里就是 $(((20 * 20) mod base) * 20) mod base...$ 这样一个过程.
